 <!DOCTYPE html>
<html lang="fa">
<head>
    <title>مستندات وندار | ارایه دهنده راهکارهای پرداخت</title>
    <meta name="description" content="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no">
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.rtl.css">
    <link rel='icon' href='../favicon.ico' type='image/x-icon' >
</head>
<body dir="rtl">
<header id="header">
    <h1>Vandar</h1>
    <h2>مستندات وندار</h2>
</header>

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div id="myHeader">
                <ul>
                    <!--                <li>-->
                    <!--                    <a href="https://vandarpay.github.io/docs/" class="active">مفاهیم اولیه</a>-->
                    <!--                    &lt;!&ndash;                    <div class="sidenav">&ndash;&gt;-->
                    <!--                </li>-->

                    <li>
                        <button class="dropdown-btn">مفاهیم اولیه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/#postman">Postman</a><br>
                            <a href="https://vandarpay.github.io/docs/#start">شروع کنید</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">درگاه پرداخت

                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/ipg/#payment-gateways">ساخت و ویرایش درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#active-ipg">فعال کردن درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#implementation">پیاده سازی فنی درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-1">مرحله اول</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-2">مرحله دوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-3">مرحله سوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-4">مرحله چهارم</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">لاگین
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/auth/#step-1">مرحله اول</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">کسب‌وکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/business/#business">لیست کسب و کار ها</a><br>
                            <a href="https://vandarpay.github.io/docs/business/#information">اطلاعات</a><br>
                            <a href="https://vandarpay.github.io/docs/business/#users">کاربران</a><br>
                            <!--                        </div>-->
                        </div>
                        <!--                        <a href="https://vandarpay.github.io/docs/business">کسب‌وکار</a>-->
                    </li>
                    <li>
                        <button class="dropdown-btn">صورت حساب
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/invoice/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/invoice/#transactions">صورت حساب</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس تسویه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/settlement/#settlements">لیست تسویه ها</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#request-settlement">ثبت درخواست تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#settlement-details">نمایش جزییات یک تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#cancel">لغو یک تسویه</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس اشتراک
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/subscription/#directdebit">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#get-token">سرویس دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#withdrawal">سرویس برداشت وجه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#error">لیست خطاهای دریافتی</a><br>
                            <!--                        </div>-->
                        </div>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/refund">بازگشت وجه</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/banks">بانک‌ها</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/errors">خطا‌ها</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-sm-9">
            <article class="content">
                <div class="article" id="ipg">

                    <div>
                        آخرین تغییرات: ۱۴۰۰/۰۴/۰۸
                    </div>

                    <h2 class="article-header">مقدمه</h2>
                    <div>
                        <h3 class="title" id="directdebit">
                          <a href="#directdebit" > <strong>دایرکت دبیت یا سرویس اشتراک چیست:</strong></a>
                        </h3>
                        <p>سرویس اشتراک یا دایرکت دبیت سرویسی است که یک فرد وجوهی را از حساب بانکی شخص دیگری خارج میکند در واقع شما به بانک اجازه میدهید که مبلغی را مستقیما   از حسابتان کسر و در قبال آن خدماتی را به شما  ارایه دهد. به طور کلی دایرت دبیت برداشت مستقیم پول برای انجام معاملات مالی در صورت صدور مجوز توسط پرداخت کننده می باشد. این کار بیشتر زمانی انجام می شود که شما بخواهید اشتراک خود را تمدید کنید.

                            شما می توانید در وندار به وسیله این API اشتراک حساب های خود را مدیریت کنید.
                            تمامی API های وندار بر اساس معماری REST پیاده سازی شده و آدرس آن به شرح زیر می باشد:
                            </p>
                        <p>برای تمامی درخواست های ارسالی باید مقادیر زیر در هدر ارسال شوند:
                            توکن همان کلید API یی است که از وندار دریافت کرده اید.
                            </p>
                        <pre>
<span class="key">Accept:</span> application/json
<span class="key">Authorization</span> Bearer {Token}
                        </pre>
                        <br>
                        <h2 class="article-header" id="get-token">
                        <a href="#get-token">سرویس دریافت توکن (AUTHORIZATION)</a> </h2>

                        <h3 class="title" id="subscription"><a href="#subscription">
                            ۱. ایجاد درخواست اشتراک:
                        </a>

                        </h3>
                        <p>اولین مرحله از برای دریافت دسترسی به حساب بانکی و ایجاد یک اشتراک جدید. ثبت درخواست اشتراک است. لازم است که درخواست اشتراک خود را به آدرس زیر ارسال کنید.</p>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/v2/business/{business}/subscription/authorization/store
                        </pre>
                        <h3 class="sub-title">
                          پارامترهای مجاز
                        </h3>
                        <table class="table">
                          <thead>
                          <tr>
                              <th>name</th>
                              <th>Type</th>
                              <th>Status</th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr>
                              <td>bank_code</td>
                              <td>string</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>mobile</td>
                              <td>string</td>
                              <td>required</td>
                          </tr>
                          <tr>
                              <td>callback_url</td>
                              <td>string</td>
                              <td>required</td>
                          </tr>
                          <tr>
                            <td>count</td>
                            <td>integer</td>
                            <td>required</td>
                          </tr>
                          <tr>
                            <td>limit</td>
                            <td>integer</td>
                            <td>required</td>
                          </tr>
                          <tr>
                            <td>name</td>
                            <td>string</td>
                            <td>optional</td>
                          </tr>
                          <tr>
                            <td>email</td>
                            <td>string</td>
                            <td>optional</td>
                          </tr>
                          <tr>
                              <td>expiration_date</td>
                              <td>date</td>
                              <td>optional</td>
                          </tr>
                          <tr>
                              <td>wage_type</td>
                              <td>string</td>
                              <td>optional</td>
                          </tr>
                        </tbody>
                      </table>
                      <h3 class="sub-title">
                        توضیحات
                      </h3>
                        <ul>
                          <li>bank_code (اجباری): کد بانک که از جدول زیر قابل دسترسی است.
                              <div class="info">
                                  <strong>نکته! </strong>
                                    اگر چه داکیومنت ما همواره به روز می‌شود اما معیار اصلی بر اساس <a href="https://health.vandar.io/subscription" target="_blank" style="color: blue">وضعیت سلامت بانک‌ها</a> است.<br>
                                  پارامتر has_direct_debit_ability: نشان‌دهنده‌ی این است که بانک مربوطه دارای قابلیت دایرکت‌دبیت (سرویس اشتراک) هست یا خیر. <br>
                                  پارامتر is_healthy_on_direct_debit: نشان‌دهنده‌ی این است که در آن لحظه‌ی خاص با توجه به وضعیت سلامت بانک مورد نظر، امکان ریدایرکت به صفحه‌ی بانک وجود دارد یا خیر.
                              </div>
                            <br>
                                <table class="table" style="direction: rtl;" id="banks_table">
                                    <thead>
                                    <tr>
                                        <th>Bank</th>
                                        <th>Code</th>
                                        <th>Current Health</th>
                                    </tr>
                                    </thead>
                                </table>
                            <br>
                          </li>
                          <li>
                            mobile (اجباری): شماره موبایل کاربر. شماره موبایل بدون کد کشور و به فرمت 09123456789 باشد.
                          </li>
                          <div class="info">
                            <strong>نکته! </strong>
                            دقت داشته باشید که در صورت منتقل شدن به صفحه‌ی بانک با این شماره موبایل، برای بانک‌هایی که برای ورود نیاز به کد ملی کاربر دارند، <b>بایستی کد ملی و شماره موبایل متعلق به یک شخص باشند. </b> در غیر این صورت در صفحه‌ی بانک با پیغام خطا روبرو می‌شود و امکان ورود پیدا نمی‌کند.
                          </div>
                            <br>
                          <li>callback_url (اجباری): باید با آدرس درگاه پرداخت تایید شده در وندار بر روی یک دامنه باشد</li>
                          <li>count (اجباری): حداکثر تعداد دفعاتی که در یک ماه می‌توان با این مجوز، برداشت وجه موفق انجام داد.</li>
                          <li>limit (اجباری):  حداکثر مبلغ قابل برداشت وجه در برداشت وجه‌های مربوط به این مجوز. واحد پول ریال است.</li>
                          <li>name (اختیاری): نام کاربر که بهتر است برای پیگیری‌های بعدی ارسال شود</li>
                          <li>email (اختیاری): ایمیل کاربر که بهتر است برای پیگیری‌های بعدی ارسال شود.</li>
                          <li>expiration_date (اختیاری): تاریخ انقضای اشتراک. این تاریخ می‌تواند تاریخ امروز یا بعد از آن باشد و به صورت میلادی وارد می‌شود. در صورتی که ارسال نشود، تاریخ سه سال بعد در نظر گرفته می‌شود.</li>
                          <li>wage_type (اختیاری): میزان کارمزد ، که میتواند دو مقدار APPLICATION_USER یا APPLICATION_SELF باشد اگر این مقدار را برابر با APPLICATION_SELF قرار دهید میزان کارمزد از شما کسر میشود و اگر برابر با APPLICATION_USER قرار دهید این مقدار از کاربر کسر میشود .</li>
                            <div class="info">
                                <strong>نکته! </strong>
                                اگر مقدار wage_type در درخواست ارسال نشود این مقدار از بخش  اشتراک -> جزییات که در پنل کاربری شما در وندار قرار گرفته است خوانده می شود.
                            </div>

                            <div class="info">
                                <strong>نکته! </strong>
                                در صورتی که wage_type در پنل کاربری شما APPLICATION_SELF  و در درخواست ارسالی شما APPLICATION_USER باشد و یا برعکس ، اولویت با درخواستی است که ارسال کرده اید.
                            </div>
                        </ul>
                        <h3 class="sub-title">
                          نمونه json
                        </h3>
                        <pre>
{
  "bank_code": "062",
  "mobile": "09123456789",
  "callback_url": "https://paperpiano.ir/subscription/callback",
  "count": 7,
  "limit": 10000,
  "name": "محمد مقصودی",
  "email": "yourcustomer@gmail.com",
  "expiration_date": "2021-03-03"
}
                        </pre>
                        <h3 class="sub-title">
                          نمونه پاسخ دریافتی موفق:
                        </h3>

                        <pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "درخواست توکن با موفقیت ثبت شد.",
  "result": {
    "authorization": {
      "token": "0cf235d0-d48b-11ea-86cd-298ec898a9bd"
    }
  }
}
                        </pre>
                        <div class="info">
                          <strong>نکته! </strong>
                          token دریافتی در این قسمت یکبار مصرف است و پس از ۲۰ دقیقه باطل می شود.
                        </div>
                        <ul>
                            <li>
                                status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
                                <br>
                                1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                <br>
                                0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                            </li>
                          <li>message: پیغام درخواست توکن با موفقیت ثبت شد</li>
                          <li>
                            result:
                            <ul>
                              <li>authorization:
                                <ul>
                                  <li>token: آیدی شما در سرویس اشتراک که باید درخواست های بعدی خود را با این آیدی ارسال کنید.</li>
                                </ul>
                              </li>
                            </ul>
                          </li>
                        </ul>
                      <h3 class="sub-title">
                        نمونه پاسخ دریافتی نا موفق:
                      </h3>
                      <pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
                        </pre>

                        <ul>
                            <li>
                                status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
                                <br>
                                1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                <br>
                                0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                            </li>
                          <li>errors: آرایه ای از خطا‌ها</li>
                        </ul>
                      <h3 class="title" id="transfer">
                       <a href="#transfer"> ۲. انتقال کاربر به صفحه بانک</a>
                      </h3>
                      <p>
                        در مرحله بعد token دریافتی از قسمت قبل را در انتهای
                         آدرس
                        می گذارید و در مرورگر وارد سایت می شوید.
                      </p>
                      <pre>
<span class="key">METHOD:</span> get
<span class="key">URL:</span> https://subscription.vandar.io/authorizations/{token}
                      </pre>

                        <p>
                            در صورتی که در ارتباط با بانک اختلال پیش آمده باشد شما با آدرس زیر روبرو می‌شوید:
                        </p>
<pre>
https://yourdomain.com/callback?token=0cf235d0-d48b-11ea-86cd-298ec898a9bd&status=FAILED_TO_ACCESS_BANK
</pre>
                        <ul>
                            <li>
                                token: توکنی که با استفاده از آن تلاش کرده‌اید تا به صفحه‌ی بانک منتقل شوید.
                            </li>
                        </ul>
                        <p>
                            در صورتی که با موفقیت به صفحه‌ی بانک وارد شوید، با صفحه‌ای مشابه با صفحه‌ی زیر مواجه خواهید شد:
							در این مرحله اطلاعات حسابی که کاربر می خواهد بر روی آن دسترسی بدهد باید وارد شود. شماره موبایلی که در این قسمت ارسال می شود باید متعلق به صاحب حساب باشد.


                        </p>

<img src="../images/authorize-intro.png" alt="صفحه ورود بانک">
<p>با وارد کردن کد ملی و گذر واژه صحیح وارد صفحه زیر می شوید.</p>
<img src="../images/authorize.png" alt="صفحه دسترسی">
<h3 class="title" id="subscription-code">
  <a href="#subscription-code">۳. دریافت کد اشتراک</a>
</h3>
<p>در صورتی که کاربر بر روی دکمه دسترسی دارد کلیک کند، وندار کاربر را به آدرس برگشتی که در مرحله اول ارسال کرده‌اید به همراه پارامتر token و status و authorization_id هدایت می‌کند.

</p>

<p>در صورت اجازه‌ی دسترسی به حساب در صفحه‌ی بانک</p>
<pre>
https://yourdomain.com/callback?token=0cf235d0-d48b-11ea-86cd-298ec898a9bd&authorization_id=9f307e30-dc77-11ea-830e-7533ca1787c5&status=SUCCEED
</pre>

<p>در صورت عدم اجازه‌ی دسترسی به حساب در صفحه‌ی بانک</p>
<pre>
https://yourdomain.com/callback?token=0cf235d0-d48b-11ea-86cd-298ec898a9bd&status=FAILED
</pre>

        <ul>
                <li>
                    token: توکنی که با استفاده از آن تلاش کرده‌اید تا به صفحه‌ی بانک منتقل شوید.
                </li>
        </ul>

<h3 class="title" id="subscriptions">
 <a href="#subscriptions"> ۴. لیست اشتراک‌ها</a>
</h3>
<p>در این بخش  شما می توانید لیست اشتراک های ایجاد شده را مشاهده کنید.</p>
<pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/v2/business/{business}/subscription/authorization
</pre>
<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد مشاهده‌ی اشتراک‌های آن را دارید.</p>
<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
  "data": [
    {
      "id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "customer_uuid": "b4d1e440-d426-11ea-a9d3-051cbf7b8f81",
      "token": "96ff2c90-d426-11ea-b499-6ddbc3441df4",
      "bank_code": "062",
      "callback_url": "http:\/\/vandar.ui\/dd\/callback.php",
      "count": 7,
      "limit": "10200",
      "mobile": "09129311989",
      "name": "محمد مقصودی",
      "email": "customer.email@gmail.com",
      "national_code": "2993968416",
      "expiration_date": "1400\/04\/04 14:47:09",
      "created_at": "1399\/04\/04 14:47:09"
    },
    ...
  ],
  "links": {
    "first": "https://api.vandar.io/v2/business/vandario/subscription/authorization?page=1",
    "last": "https://api.vandar.io/v2/business/vandario/subscription/authorization?page=1",
    "prev": null,
    "next": null
  },
  "meta": {
    "current_page": 1,
    "from": 1,
    "last_page": 1,
    "path": "https://api.vandar.io/v2/business/vandario/subscription/authorization",
    "per_page": 20,
    "to": 3,
    "total": 3
  }
}
</pre>
<ul>
  <li>
    data:
    <ul>
      <li>id: آیدی اشتراک که برای درخواست برداشت وجه از این آیدی استفاده می شود.</li>
      <li>customer_uuid: شناسه مشتری کسب و کار شما</li>
      <li>token: توکنی که در مرحله اول برای شما ارسال شده است.</li>
      <li>bank_code: کد بانک که لیست آن در بالا اشاره شده است.</li>
      <li>callback_url: آدرس بازگشتی ای که در زمان درخواست ارسال کرده اید.</li>
      <li>count: رشته عددی مشخص کننده تعداد درخواست های برداشت وجه که به صورت ماهیانه مشخص می‌شود.</li>
      <li>limit: رشته عددی مشخص کننده حداکثر مبلغ برداشت وجه در هر برداشت. واحد پول ریال است.</li>
      <li>mobile: شماره موبایل کاربر</li>
      <li>name: نام کاربر اگر در مرحله قبل ارسال کردید</li>
      <li>email: ایمیل کاربر اگر در مرحله قبل ارسال کردید</li>
      <li>national_code: کدملی کاربر در صورتی که بانک به وندار برگردانده باشد</li>
      <li>created_at: زمان ساخت اشتراک</li>
    </ul>
  </li>
  <li>
    links:
    <ul>
      <li>first: آدرس اولین صفحه</li>
      <li>last: آدرس آخرین صفحه</li>
      <li>prev: آدرس صفحه قبل</li>
      <li>next: آدرس صفحه بعد</li>
    </ul>
  </li>
  <li>
    meta:
    <ul>
      <li>current_page: آدرس همین صفحه</li>
      <li>from: شماره اولین آیتم تسویه ای که در این صفحه آمده است </li>
      <li>last_page: تعداد کل صفحات تسویه</li>
      <li>path: آدرس خالص بدون صفحه بندی</li>
      <li>per_page: تعداد آیتم در هر صفحه</li>
      <li>to: شماره آخرین آیتم تسویه ای که در این صفحه آمده است</li>
      <li>total: تعداد کل آیتم های تسویه</li>
    </ul>
  </li>
</ul>
<div class="info">
  <strong>نکته! </strong>
     در این قسمت در خروجی id را دریافت میکنیم که مطابق با همان subscription_code دریافتی از url در مرحله قبل می باشد. و در مراحل بعد برای استفاده از متد show و revoke که برای نمایش و پاک کردن اشتراک است مورد استفاده قرار میگیرد.
</div>
<h3 class="sub-title">
  نمونه پاسخ دریافتی نا موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
"status": 0,
"error": "Unauthenticated"
}
  </pre>
  <ul>
      <li>
          status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
          <br>
          1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
          <br>
          0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
      </li>
    <li>errors: آرایه ای از خطا‌ها</li>
  </ul>
<h3 class="title" id="show">
<a href="#show">  ۵. نمایش یک اشتراک با id </a>
</h3>
<p>شما می توانید با این دستور جزییات یک اشتراک را با فرستادن id دریافت کنید.</p>
<pre>
<span class="key">Method:</span> GET
<span class="key">Address:</span> https://api.vandar.io/v2/business/{business}/subscription/authorization/{id}
</pre>
<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد مشاهده یکی از اشتراک های آن را دارید.</p>
<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "مجوز با موفقیت به نمایش در آمد.",
  "result": {
    "authorizations": {
      "id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "customer_uuid": "b4d1e440-d426-11ea-a9d3-051cbf7b8f81",
      "token": "96ff2c90-d426-11ea-b499-6ddbc3441df4",
      "bank_code": "062",
      "callback_url": "http:\/\/vandar.ui\/dd\/callback.php",
      "count": 7,
      "limit": "10200",
      "mobile": "09129311989",
      "name": "محمد مقصودی",
      "email": "customer.email@gmail.com",
      "national_code": "2993968416",
      "expiration_date": "1400\/04\/04 14:47:09",
      "created_at": "1399\/04\/04 14:47:09"
    }
  }
}
</pre>
<ul>
    <li>
        status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>message: پیغام مجوز با موفقیت به نمایش در آمد</li>
  <li>
    result:
    <ul>
      <li>authorizations:
        <ul>
          <li>id: آیدی اشتراک که برای درخواست برداشت وجه از این آیدی استفاده می شود.</li>
          <li>customer_uuid: شناسه مشتری کسب و کار شما</li>
          <li>token: توکنی که در مرحله اول برای شما ارسال شده است.</li>
          <li>bank_code: کد بانک که لیست آن در بالا اشاره شده است.</li>
          <li>callback_url: آدرس بازگشتی ای که در زمان درخواست ارسال کرده اید.</li>
          <li>count: رشته عددی مشخص کننده تعداد درخواست های برداشت وجه که به صورت ماهیانه مشخص می‌شود.</li>
          <li>limit: رشته عددی مشخص کننده حداکثر مبلغ برداشت وجه در هر برداشت. واحد پول ریال است.</li>
          <li>mobile: شماره موبایل کاربر</li>
          <li>name: نام کاربر اگر در مرحله قبل ارسال کردید</li>
          <li>email: ایمیل کاربر اگر در مرحله قبل ارسال کردید</li>
          <li>national_code: کدملی کاربر در صورتی که بانک به وندار برگردانده باشد</li>
          <li>created_at: زمان ساخت اشتراک</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<p>در صورتی که توکن فرستاده شده برای کسب و کاری که در آدرس ارسال کردید، معتبر نباشد پاسخ زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>
  <p>در صورتی که برنامه ای مربوط به نام کسب و کار ارسال شده در آدرس، وجود نداشت پاسخ زیر را  دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 404
{
  "status": 0,
  "message": "برنامه کاربردی با این شناسه کاربری یافت نشد"
}
</pre>

                          
<p>اگر مجوزی مربوط به آیدی ارسال شده موجود نباشد، پاسخ زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 404
{
  "status": 0,
  "message": "چنین مجوزی یافت نشد."
}
</pre>

                          <p>اگر مجوز مربوط به آیدی ارسال شده باطل شده باشد، خطای زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 422
{
  "message": "The given data was invalid.",
  "errors": {
      "message": [
          "مجوز باطل شده است."
      ]
  }
}
</pre>

                          <ul>
                              <li>
                                  status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
                                  <br>
                                  1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                  <br>
                                  0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                              </li>
                            <li>message: آرایه ای از خطا‌ها</li>
                          </ul>



<h3 class="title" id="delete">
 <a href="#delete">۶. پاک کردن یک اشتراک با استفاده از id</a>
</h3>

<pre>
<span class="key">Method:</span> DELETE
<span class="key">Address:</span> https://api.vandar.io/v2/business/{business}/subscription/authorization/{id}
</pre>

<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد حذف یکی از اشتراک های آن را دارید.</p>
<p>پارامتر {id} همان id مربوط به اشتراکی است که قصد حذف آن را دارید.</p>

<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "مجوز با موفقیت لغو گردید.",
  "result": {
    "authorizations": {
      "id": "9f307e30-dc77-11ea-830e-7533ca1787c5"
    }
  }
}
</pre>
<ul>
    <li>
        status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>message: پیغام مجوز با موفقیت لغو گردید</li>
  <li>
    result:
    <ul>
      <li>authorization:
        <ul>
          <li>id: آیدی اشتراک حذف شده </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<p>در صورتی که توکن فرستاده شده برای کسب و کاری که در آدرس ارسال کردید، معتبر نباشد پاسخ زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>

                          <ul>
                              <li>
                                  status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
                                  <br>
                                  1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                  <br>
                                  0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                              </li>
                            <li>errors: آرایه ای از خطا‌ها</li>
                          </ul>

  <p>در صورتی که اشتراکی با id ارسال شده موجود نباشد پاسخ زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 404
{
  "status": 0,
  "message": "خطای ۴۰۴ رخ داده است"
}
</pre>

                          <ul>
                              <li>
                                  status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
                                  <br>
                                  1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                  <br>
                                  0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                              </li>
                            <li>message: آرایه ای از خطا‌ها</li>
                          </ul>

<br>

<h2 class="article-header" id="withdrawal"> <a href="#withdrawal"> سرویس برداشت وجه  (Withdrawal)</a></h2>

<p>سرویس برداشت وجه از حساب دیگران، این سرویس هنگامی به کار می‌رود که شما قصد دارید از حساب مشتریان خود یکبار یا به صورت دوره‌ای وجهی را برداشت کنید.</p>

<h3 class="title">
  ۱. ثبت درخواست برداشت وجه
</h3>

<p>این درخواست برداشت وجه را می توانید تا سقف محدودیت مبلغ و تعداد برداشت تعیین شده برای اشتراک صدا بزنید.</p>

<pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/v2/business/{business}/subscription/withdrawal/store
</pre>

<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد برداشت وجه از اشتراک آن را دارید.</p>

<h3 class="sub-title">
  پارامترهای مجاز
</h3>

<table class="table" dir="rtl">
  <thead>
  <tr>
      <th>name</th>
      <th>Type</th>
      <th>Status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
      <td>authorization_id</td>
      <td>string</td>
      <td>required</td>
  </tr>
  <tr>
      <td>amount</td>
      <td>string</td>
      <td>required</td>
  </tr>
  <tr>
    <td>withdrawal_date</td>
    <td>string</td>
    <td>required if is_instant=0</td>
  </tr>
  <tr>
      <td>is_instant</td>
      <td>Integer (0,1)</td>
      <td>optional</td>
  </tr>
  <tr>
      <td>notify_url</td>
      <td>string</td>
      <td>optional</td>
  </tr>
  <tr>
      <td>max_retry_count</td>
      <td>integer</td>
      <td>optional</td>
  </tr>
  </tbody>
</table>

<h3 class="sub-title">
  توضیحات
</h3>

<h3 class="sub-title">
  دو نوع برداشت امکان پذیر است. در همین لحظه (is_instant=1) و برداشت در آینده (is_instant=0):
</h3>

<p>
در صورت برداشت آنی (is_instant=1) برداشت از حساب کاربر در همان لحظه انجام می شود. در این حالت ۲ پارامتر withdrawal_date و max_retry_count از درخواست شما محاسبه نمی شوند بلکه withdrawal_date همیشه برابر تاریخ امروز و max_retry_count همیشه برابر با ۱ در نظر گرفته می شوند. بودن یا نبودن این دو پارامتر در درخواست شما تغییری ایجاد نمی کند.
</p>
<p>
در صورت برداشت در آینده (is_instant=0) برداشت از حساب کاربر زمانی در آینده رخ خواهد داد. این زمان را شما با پارامتر withdrawal_date تعیین می کنید و در حالت برداشت در آینده این پارامتر اجباری است و باید تاریخ صحیحی بعد از امروز باشد. در این حالت پارامتر max_retry_count اختیاری است و در صورت وجود نداشتن در درخواست شما برابر با ۱ در نظر گرفته می شود. اما اگر عدد دیگری برای max_retry_count تعیین کنید، عدد در خواست شما برای این پارامتر منظور می شود.
</p>
 

<ul>
  <li>authorization_id (اجباری):
    آیدی دریافتی در بخش اشتراک که می خواهید مبلغ از آن دسترسی برداشت شود
  </li>
  <li>amount (اجباری):
    مبلغ برداشت وجه
  </li>
  <li>withdrawal_date (اجباری در حالت is_instant=0):
    تاریخی که در آن روز از حساب برداشت شود. روز معین شده باید بعد از امروز باشد.
  </li>
    <li>is_instant (اختیاری):
این پارامتر مشخص می‌کند که برداشت وجه در همین لحظه انجام شود یا در آینده. مقدار این پارامتر می تواند 0 یا 1 باشد. 1 به معنای این که برداشت در لحظه انجام شود و 0 به این معنا که برداشت در آینده انجام شود. در صورت عدم ارسال، 1 در نظر گرفته می‌شود.

    </li>
    <li>notify_url (اختیاری):
        آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید. در مواقع تست می‌توانید از وبسایت  <a target="_blank" href="https://webhook.site">webhook.site</a>استفاده کنید.
    </li>
    <li>max_retry_count (اختیاری):
        حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان برای یک برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در نظر گرفته می‌شود.
        همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر گرفته می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین وضعیت می‌شود که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت وجه موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل موفقیت‌آمیز نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count برسد سعی به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن برداشت وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد و هنوز برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه از حالت PENDING به حالت FAILED تبدیل می‌شود.
    </li>
</ul>

<h3 class="sub-title">
  نمونه json
</h3>

<pre>
{
  "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
  "amount": "10000",
  "is_instant": 1,
  "notify_url": "http://yourdomain.com/notify/me",
}
</pre>

<pre>
{
  "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
  "amount": "10000",
  "withdrawal_date": "2020-07-04",
  "is_instant": 0,
  "notify_url": "http://yourdomain.com/notify/me",
  "max_retry_count": 1
}
</pre>

<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>

<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "درخواست برداشت وجه با موفقیت ثبت شد.",
  "result": {
    "withdrawal": {
      "id": "8c6e27c0-dbbd-11ea-a2f6-e9c8bf97463f",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": "159714176734",
      "amount": "10000",
      "wage_amount": 200,
      "payment_number": null,
      "status": "PENDING",
      "description": null,
      "withdrawal_date": "1399\/05\/21",
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true,
      "error_code": null,
      "error_message": null
    }
  }
}
</pre>

<ul>
    <li>
        status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>message: پیغام درخواست برداشت وجه با موفقیت ثبت شد</li>
    <li>
        result:
        <ul>
            <li>withdrawal:
                <ul>
                    <li>id: آیدی درخواست برداشت وجه</li>
                    <li>authorization_id: آیدی اشتراکی که درخواست برداشت وجه برای آن صادر شده است</li>
                    <li>retry_count: تعداد دفعات تلاش برای برداشت وجه</li>
                    <li>gateway_transaction_id: شناسه یکتای برداشت وجه</li>
                    <li>amount: مبلغ برداشت وجه</li>
                    <li>wage_amount: کارمزد</li>
                    <li>payment_number: شناسه بانکی برداشت وجه</li>
                    <li>status: وضعیت برداشت وجه که ۵ حالت PENDING, INIT, DONE, CANCELED, FAILED دارد. وضعیت PENDING
                        نشان‌دهنده‌ی این است که تراکنش در حالت انتظار است. INIT نشان‌دهنده‌ی این است که تراکنش به سمت
                        بانک
                        فرستاده شده است. DONE نشان‌دهنده‌ی وضعیت موفقیت‌آمیز تراکنش است. FAILED تراکنش ناموفق را نشان
                        می‌دهد.
                        CANCELED تراکنشی را نشان می‌دهد که لغو شده است. لازم به ذکر است که امکان لغو تراکنش صرفاً برای
                        تراکنش‌هایی امکان‌پذیر است که به صورت آنی انجام نشده باشند (is_instant: false).
                    </li>
                    <li>description: توضیحات</li>
                    <li>withdrawal_date: تاریخ درخواست برداشت وجه ارسالی توسط شما</li>
                    <li>notify_url: آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید. لازم
                        به
                        ذکر
                        است که متد POST برای ارسال به این آدرس در نظر گرفته شده است و فیلدهای withdrawal_id,
                        authorization_id,
                        gateway_transaction_id, status, amount و payment_number برای شما ارسال می‌شود. در شرایطی که شما
                        در
                        حال
                        تست هستید می‌توانید از وبسایت <a target="_blank" href="https://webhook.site">webhook.site</a>
                        استفاده
                        کنید.
                    </li>
                    <li>is_instant: نشان دهنده این است که برداشت وجه به صورت آنی انجام شده است یا خیر.</li>
                    <li>max_retry_count:
                        حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان
                        برای
                        یک
                        برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در
                        نظر
                        گرفته
                        می‌شود.
                        همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر
                        گرفته
                        می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین
                        وضعیت
                        می‌شود
                        که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت
                        وجه
                        موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل
                        موفقیت‌آمیز
                        نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count
                        برسد
                        سعی
                        به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن
                        برداشت
                        وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد
                        و
                        هنوز
                        برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه
                        از
                        حالت
                        PENDING به حالت FAILED تبدیل می‌شود.
                    </li>
                    <li>error_code: کد خطای ناموفق بودن درخواست برداشت وحه</li>
                    <li>error_message: متن خطای ناموفق بودن درخواست برداشت وحه</li>
                    <div class="info">
                        <strong>نکته! </strong>
                        <a href="https://vandarpay.github.io/docs/subscription/#error">لیست تمامی خطا ها در پایین صفحه قرار گرفته است.</a>
                    </div>

                </ul>
            </li>
        </ul>
    </li>
</ul>

<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<p>
  اگر بیشتر از تعداد count این درخواست را صدا بزنید با خطای زیر مواجه می شوید.
</p>

<pre>
<span class="key">HTTP/1.1</span> 422
{
  "status": 0,
  "errors": {
    "authorization_id": "ذخیره برداشت وجه به دلیل رسیدن به حداکثر تعداد برداشت در ماه، امکان پذیر نیست."
  }
}
</pre>
<ul>
    <li>
        status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>
    errors:
    <ul>
      <li>authorization_id: متن خطا</li>
    </ul>
  </li>
</ul>
<p>در صورتی که توکن فرستاده شده معتبر نباشد پاسخ زیر را دریافت می کنید:</p>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>

                          <ul>
                              <li>
                                  status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
                                  درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
                                  منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
                                  شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
                                  خیر. به طور خلاصه:
                                  <br>
                                  1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                  <br>
                                  0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                              </li>
                              <li>errors: آرایه ای از خطا‌ها</li>
                          </ul>

                        <p>در صورت عدم وجود کسب و کار این خطا را دریافت می کنید: </p>
                        <pre>
<span class="key">HTTP/1.1</span> 404
{
  "status": 0,
  "error": "کسب و کار وجود ندارد"
}
</pre>

                        <ul>
                            <li>
                                status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛
                                درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن
                                منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به
                                شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا
                                خیر. به طور خلاصه:
                                <br>
                                1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
                                <br>
                                0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
                            </li>
                            <li>message: آرایه ای از خطا‌ها</li>
                        </ul>
                        <p>در صورت عدم کفایت موجودی خطای زیر را در خروجی درخواست دریافت خواهید کرد: </p>

<pre>
<span class="key">HTTP/1.1</span> 200
{
"status": 1,
"message": "برداشت وجه با موفقیت به نمایش درآمد.",
"result": {
"withdrawal": {
"id": "c0fae570-9b64-11eb-9635-1bfa552b96c5",
"authorization_id": "ac42fcd0-9b64-11eb-af96-abcc98948330",
"retry_count": 1,
"max_retry_count": 1,
"gateway_transaction_id": 159903362213,
"amount": 2040000,
"wage_amount": "40000.00",
"payment_number": null,
"status": "INIT",
"description": null,
"withdrawal_date": "1400\/01\/22",
"notify_url": null,
"is_instant": 0,
"error_code": "01",
"error_message": "عدم کفایت موجودی"
}
</pre>


<h2 class="article-header" id="error">
    <a href="#error"> نمونه خطاهای دریافتی هنگام برداشت وجه ناموفق:</a>
</h2>

<table class="table">
                            <thead>
                            <tr>
                                <th>Error Code</th>
                                <th>Error Message</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>01</td>
                                <td>عدم کفایت موجودی</td>
                            </tr>
                            <tr>
                                <td>02</td>
                                <td>خطای سرور</td>
                            </tr>
                            <tr>
                                <td>03</td>
                                <td>منبع مورد نظر یافت نشد</td>
                            </tr>
                            <tr>
                                <td>04</td>
                                <td>محدودیت تعداد تراکنش روزانه برای این واگذاری رعایت نشده است</td>
                            </tr>
                            <tr>
                                <td>05</td>
                                <td>برنامه مورد نظر یافت نشد</td>
                            </tr>
                            <tr>
                                <td>06</td>
                                <td>توکن نامعتبر</td>
                            </tr>
                            <tr>
                                <td>07</td>
                                <td>سپرده نامعتبر</td>
                            </tr>
                            <tr>
                                <td>08</td>
                                <td>مبلغ نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>09</td>
                                <td>حساب مقصد نامعتبر</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>واگذار کننده به عنوان مشتری بانک موردنظر ثبت نشده است</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>شماره پیگیری تکراری/نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>وضعیت موسسه نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td>وضعیت واگذاری نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td>واگذاری منقضی شده است</td>
                            </tr>
                            <tr>
                                <td>15</td>
                                <td>زمان انجام تراکنش برای این واگذاری نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td>محدودیت تعداد تراکنش روزانه برای این واگذاری رعایت نشده است</td>
                            </tr>
                            <tr>
                                <td>17</td>
                                <td>محدودیت تعداد تراکنش ماهانه برای این واگذاری رعایت نشده است</td>
                            </tr>
                            <tr>
                                <td>18</td>
                                <td>زمان پیمان شروع نشده است</td>
                            </tr>
                            <tr>
                                <td>19</td>
                                <td>مبلغ ورودی نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>20</td>
                                <td>ارز مبدا مقصد یکسان نیست/کد ارز مورد نظر در سیستم تعریف نشده</td>
                            </tr>
                            <tr>
                                <td>21</td>
                                <td>سپرده متعلق به کاربر نیست/عدم امکان دسترسی به سپرده/عدم وجود حق برداشت/برداشت امکانپذیر نیست</td>
                            </tr>
                            <tr>
                                <td>22</td>
                                <td>شماره سپرده نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td>پارامترهای ورودی به درستی وارد نشده اند</td>
                            </tr>
                            <tr>
                                <td>24</td>
                                <td>شماره سپرده مورد نظر وجود ندارد</td>
                            </tr>
                            <tr>
                                <td>25</td>
                                <td>خطای داخلی بوم</td>
                            </tr>
                            <tr>
                                <td>26</td>
                                <td>خطاهای داخلی پیمان</td>
                            </tr>
                            <tr>
                                <td>27</td>
                                <td>شناسه موسسه مورد نظر یافت نشده/نامعتبر است</td>
                            </tr>
                            <tr>
                                <td>28</td>
                                <td>حساب مسدود است</td>
                            </tr>
                            </tbody>
                        </table>

<h3 class="title" id="list-of-registered-funds"><a href="#list-of-registered-funds"> ۲. لیست
                            برداشت وجه های ثبت شده
</a>
</h3>
<p>با استفاده از api زیر می توانید تمام برداشت های وجه انجام شده تا کنون را مشاهده کنید. </p>
                        <pre>
<span class="key">Method:</span> GET
<span class="key">Address:</span> https://api.vandar.io/v2/business/{business}/subscription/withdrawal
</pre>
                        <p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد نمایش لیست برداشت وجه از اشتراک آن
                            را دارید.</p>

                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>

                        <pre>
<span class="key">HTTP/1.1</span> 200

{
  "data": [
    {
      "id": "f3d084e0-b603-11ea-94ad-ebc7f5bf8e12",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": 159281892196,
      "amount": 10000,
      "wage_amount": "200.00",
      "payment_number": null,
      "status": "DONE",
      "description": null,
      "withdrawal_date": "1399\/04\/04",
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true,
      "error_code": null,
      "error_message": null
    },
    ...
  ],
  "links": {
    "first": "https://api.vandar.io/v2/business/vandario/subscription/withdrawal?page=1",
    "last": "https://api.vandar.io/v2/business/vandario/subscription/withdrawal?page=33",
    "prev": null,
    "next": "https://api.vandar.io/v2/business/vandario/subscription/withdrawal?page=2"
  },
  "meta": {
    "current_page": 1,
    "from": 1,
    "last_page": 33,
    "path": "https://api.vandar.io/v2/business/vandario/subscription/withdrawal",
    "per_page": 20,
    "to": 20,
    "total": 656
  }
}
</pre>

<ul>
  <li>
    data:
    <ul>
      <li>id: آیدی درخواست برداشت وجه</li>
      <li>authorization_id: آیدی اشتراکی که درخواست برداشت وجه برای آن صادر شده است</li>
      <li>retry_count: تعداد دفعات تلاش برای برداشت وجه</li>
      <li>gateway_transaction_id: شناسه یکتای برداشت وجه</li>
      <li>amount: مبلغ برداشت وجه</li>
      <li>wage_amount: کارمزد </li>
      <li>payment_number: شناسه بانکی برداشت وجه</li>
      <li>status: وضعیت برداشت وجه که ۴ حالت PENDING, DONE, CANCELED, FAILED دارد.</li>
      <li>description: توضیحات </li>
      <li>withdrawal_date: تاریخ درخواست برداشت وجه ارسالی توسط شما</li>
      <li>notify_url: آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید. لازم به ذکر است که متد POST برای ارسال به این آدرس در نظر گرفته شده است و فیلدهای withdrawal_id, authorization_id, gateway_transaction_id, status, amount و payment_number برای شما ارسال می‌شود.</li>
      <li>is_instant: نشان دهنده این است که برداشت وجه به صورت آنی انجام شده است یا خیر</li>
      <li>max_retry_count (اختیاری):
          حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان برای یک برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در نظر گرفته می‌شود.
          همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر گرفته می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین وضعیت می‌شود که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت وجه موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل موفقیت‌آمیز نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count برسد سعی به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن برداشت وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد و هنوز برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه از حالت PENDING به حالت FAILED تبدیل می‌شود.
      </li>
      <li>error_code: کد خطای ناموفق بودن درخواست برداشت وحه</li>
      <li>error_message: متن خطای ناموفق بودن درخواست برداشت وحه</li>
    </ul>
  </li>
  <li>
    links:
    <ul>
      <li>first: آدرس اولین صفحه</li>
      <li>last: آدرس آخرین صفحه</li>
      <li>prev: آدرس صفحه قبل</li>
      <li>next: آدرس صفحه بعد</li>
    </ul>
  </li>
  <li>
    meta:
    <ul>
      <li>current_page: آدرس همین صفحه</li>
      <li>from: شماره اولین آیتم تسویه ای که در این صفحه آمده است </li>
      <li>last_page: تعداد کل صفحات تسویه</li>
      <li>path: آدرس خالص بدون صفحه بندی</li>
      <li>per_page: تعداد آیتم در هر صفحه</li>
      <li>to: شماره آخرین آیتم تسویه ای که در این صفحه آمده است</li>
      <li>total: تعداد کل آیتم های تسویه</li>
    </ul>
  </li>
</ul>

<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>
<ul>
    <li>
        status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>errors: آرایه ای از خطا‌ها</li>
</ul>



<h3 class="title" id="show-withdrawal"><a href="#show-withdrawal">
    ۳. نمایش یک برداشت وجه:
</a>
</h3>

<pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/v2/business/{business}/subscription/withdrawal/{id}
</pre>
<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد دارید یک برداشت وجه از آن را نمایش دهید.</p>
<p>پارامتر {id} همان id مربوط به برداشت وجهی است که قصد نمایش آن را دارید.</p>


<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "برداشت وجه با موفقیت به نمایش درآمد.",
  "result": {
    "withdrawal": {
      "id": "f3d084e0-b603-11ea-94ad-ebc7f5bf8e12",
      "authorization_id": "9f307e30-dc77-11ea-830e-7533ca1787c5",
      "retry_count": 1,
      "max_retry_count": 1,
      "gateway_transaction_id": 159281892196,
      "amount": 10000,
      "wage_amount": "200.00",
      "payment_number": null,
      "status": "DONE",
      "description": null,
      "withdrawal_date": "1399\/04\/04"
      "notify_url": "http://yourdomain.com/notify/me",
      "is_instant": true
      "error_code": null,
      "error_message": null
      }
    },
  }
}
</pre>
<ul>
    <li>
        status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
        <br>
        1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
        <br>
        0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
    </li>
  <li>message: پیغام برداشت وجه با موفقیت به نمایش درآمد</li>
  <li>
    result:
    <ul>
      <li>withdrawal:
        <ul>
          <li>id: آیدی درخواست برداشت وجه</li>
          <li>authorization_id: آیدی اشتراکی که درخواست برداشت وجه برای آن صادر شده است</li>
          <li>retry_count: تعداد دفعات تلاش برای برداشت وجه</li>
          <li>gateway_transaction_id: شناسه یکتای برداشت وجه</li>
          <li>amount: مبلغ برداشت وجه</li>
          <li>wage_amount: کارمزد </li>
          <li>payment_number: شناسه بانکی برداشت وجه</li>
          <li>status: وضعیت برداشت وجه که ۴ حالت PENDING, DONE, CANCELED, FAILED دارد.</li>
          <li>description: توضیحات </li>
          <li>withdrawal_date: تاریخ درخواست برداشت وجه ارسالی توسط شما</li>
          <li>notify_url: آدرس وبهوکی که می‌توانید ارسال کنید تا از وضعیت نهایی این برداشت وجه مطلع شوید. لازم به ذکر است که متد POST برای ارسال به این آدرس در نظر گرفته شده است و فیلدهای withdrawal_id, authorization_id, gateway_transaction_id, status, amount و payment_number برای شما ارسال می‌شود.</li>
          <li>is_instant: نشان دهنده این است که برداشت وجه به صورت آنی انجام شده است یا خیر</li>
          <li>max_retry_count (اختیاری):
              حداکثر تعداد دفعاتی که می‌خواهید برای این برداشت وجه تلاش شود. حداقل ۱ و حداکثر ۱۶ مرتبه می‌توان برای یک برداشت وجه تلاش کرد. دقت داشته باشید که در صورت عدم ارسال این پارامتر، مقدار آن برابر با ۱ در نظر گرفته می‌شود.
              همچنین در نظر داشته باشید این پارامتر برای برداشت وجه‌های آنی (is_instant: 1) برابر با ۱ در نظر گرفته می‌شود (و برداشت وجه آنی بلافاصله پس از استعلام (نمایش برداشت وجه - withdrawal show)، تعیین وضعیت می‌شود که حالت FAILED است یا DONE). در صورتی که برداشت وجه به صورت آنی نباشد (is_instant: 0) اگر برداشت وجه موفقیت‌آمیز باشد (status: DONE) که دیگر تلاشی صورت نمی‌گیرد، اما اگر برداشت وجه به هر دلیل موفقیت‌آمیز نباشد، تا زمانی که برداشت وجه موفقیت‌آمیز شود و یا مقدار retry_count به تعداد max_retry_count برسد سعی به برداشت وجه صورت می‌گیرد. لازم به ذکر است که تا زمانی که برداشت وجه موفقیت‌آمیز نباشد وضعیت آن برداشت وجه به حالت PENDING است و فقط زمانی که مقدار retry_count به max_retry_count (ارسالی از شما) برسد و هنوز برداشت وجه موفقیت‌آمیز نبوده باشد دیگر تلاشی برای برداشت وجه صورت نمی‌گیرد و وضعیت آن برداشت وجه از حالت PENDING به حالت FAILED تبدیل می‌شود.
          </li>
          <li>error_code: کد خطای ناموفق بودن درخواست برداشت وحه</li>
          <li>error_message: متن خطای ناموفق بودن درخواست برداشت وحه</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h3 class="sub-title">
  نمونه پاسخ دریافتی ناموفق:
</h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>

  <ul>
      <li>
          status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
          <br>
          1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
          <br>
          0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
      </li>
    <li>errors: آرایه ای از خطا‌ها</li>
  </ul>



          <h3 class="title" id="cancel-withdrawal"><a href="#cancel-withdrawal">
              ۴. انصراف از برداشت وجه:
          </a>
          </h3>

          <p>در صورتی که کاربر از برداشت وجه منصرف شود با صدا زدن متد زیر می تواند انصراف خود را اعلام کند.</p>

<pre>
<span class="key">METHOD:</span> PUT
<span class="key">URL:</span> https://api.vandar.io/v2/business/{business}/subscription/withdrawal/{id}
</pre>
<p>پارامتر {business} همان نام انگلیسی کسب و کاری است که قصد دارید یک برداشت وجه از آن را لغو کنید.</p>
<p>پارامتر {id} همان id مربوط به برداشت وجهی است که قصد لغو آن را دارید.</p>

<h3 class="sub-title">
  نمونه پاسخ دریافتی موفق:
</h3>

<pre>
  <span class="key">HTTP/1.1</span> 200
{
  "status": 1,
  "message": "برداشت وجه با موفقیت لغو گردید.",
  "result": {
    "withdrawal": {
      "id": "8c6e27c0-dbbd-11ea-a2f6-e9c8bf97463f"
    }
  }
}
  </pre>

  <ul>
      <li>
          status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
          <br>
          1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
          <br>
          0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
      </li>
    <li>message: پیغام برداشت وجه با موفقیت لغو گردید.</li>
    <li>
      result:
      <ul>
        <li>withdrawal:
          <ul>
            <li>id: </li> شناسه‌ی برداشت وجهی که قصد کنسل کردن آن را داشتید.
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <h3 class="sub-title">
    نمونه پاسخ دریافتی ناموفق:
  </h3>
<pre>
<span class="key">HTTP/1.1</span> 401
{
  "status": 0,
  "error": "Unauthenticated"
}
</pre>

      <ul>
          <li>
              status: ما http response را مطابق آن‌چه که واقعاً اتفاق افتاده برای شما ارسال می‌کنیم؛ درخواست‌های موفقیت‌آمیز با ۲۰۰، خطاهای اعتبارسنجی را با ۴۲۲، خطای ۴۰۴ برای عدم یافتن منبعی خاص، خطاهای سمت سرور با ۵۰۰ و غیره. اما افزون بر این، فیلد status برای کمک به شماست که متوجه شوید آیا این api کاری که به آن محول شده را به درستی انجام داده است یا خیر. به طور خلاصه:
              <br>
              1 به معنای این است که http response از خانواده‌ی ۲۰۰ است.
              <br>
              0 به معنای این است که http response از خانواده‌ی ۴۰۰ یا ۵۰۰ است.
          </li>
        <li>errors: آرایه ای از خطا‌ها</li>
      </ul>

<h3 class="title" id="health">
    <strong><a href="#health">وضعیت سلامت بانک‌های سرویس اشتراک</a></strong>
</h3>
<p>در این آدرس ‌می‌توانید از وضعیت سلامت بانک‌های سرویس اشتراک مطلع شوید.</p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://health.vandar.io/subscription
                      </pre>


                      </div>
                    </article>
              </div>
          </div>
      </div>
  <footer id="footer">
    <div class="container">
        <div class="row" style="text-align: center">
            <div class="col-sm-8 col-xs-6 no-padding-bottom">
                <a href="https://github.com/vandarpay/docs" target="_blank">مخزن گیت‌هاب</a>
            </div>
            <div class="col-sm-4 col-xs-6 text-right no-padding-bottom">2020 &copy; <a href="https://vandar.io" target="_blank">وندار</a></div>
        </div>
    </div>

</footer>
<button onclick="goTop()" id="go_top" title="Go to top">^</button>
<script>
    /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }


    var header = document.getElementById("myHeader");
    var sticky = header.offsetTop;

    window.onscroll = function () {
        var top = document.getElementById("go_top");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            top.style.display = "block";
        } else {
            top.style.display = "none";
        }
        if (window.pageYOffset  > 320) {
            header.classList.add("fix-sidebar");
        } else {
            header.classList.remove("fix-sidebar");
        }

    };

    function goTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

    fetch('https://health.vandar.io/subscription')
      .then(function(response) {
        return response.json();
      })
      .then(function(jsonResponse) {

        var banksHealthResponse = jsonResponse;

        var table = document.getElementById("banks_table");
        var banks = banksHealthResponse["result"]["banks"];

        for (var i = 0; i < banks.length ; i++)  {
            if (banks[i]["is_healthy_on_direct_debit"]) {
                var row = table.insertRow(-1);
                var bankName = row.insertCell(0);
                var bankCode = row.insertCell(1);
                var bankIsHealthyDirectDebit = row.insertCell(2);

                bankName.innerHTML = banks[i]["name"];
                bankCode.innerHTML = banks[i]["code"];
                bankIsHealthyDirectDebit.innerHTML = "سالم";
                bankIsHealthyDirectDebit.style.color = "green";
            }
        }

      });


</script></body>
</html>

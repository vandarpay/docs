<!DOCTYPE html>
<html lang="fa">
<head>
    <title>مستندات وندار | ارایه دهنده راهکارهای پرداخت</title>
    <meta name="description" content="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <meta name="format-detection" content="telephone=no">
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.rtl.css">
    <link rel='icon' href='https://cdn.vandar.ir/public/logos/icon-logo.svg' type='image/x-icon'>
</head>
<body dir="rtl">
<header id="header">
    <h1>Vandar</h1>
    <h2>مستندات وندار</h2>
</header>

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div id="myHeader">
                <ul>
                    <li>
                        <button class="dropdown-btn">مفاهیم اولیه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/#postman">Postman</a><br>
                            <a href="https://vandarpay.github.io/docs/#start">شروع کنید</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">درگاه پرداخت

                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/ipg/#payment-gateways">ساخت و ویرایش درگاه
                                پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#active-ipg">فعال کردن درگاه پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#implementation">پیاده سازی فنی درگاه
                                پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-1">مرحله اول</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-2">مرحله دوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-3">مرحله سوم</a><br>
                            <a href="https://vandarpay.github.io/docs/ipg/#step-4">مرحله چهارم</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">دریافت توکن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/auth/#step-1">مرحله اول</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">کسب‌وکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">

                            <a href="https://vandarpay.github.io/docs/business/#information">اطلاعات</a><br>
                            <a href="https://vandarpay.github.io/docs/business/#users">کاربران</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">صورت حساب
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/invoice/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/invoice/#transactions">صورت حساب</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس تسویه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/settlement/#settlements">لیست تسویه ها</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#request-settlement">ثبت درخواست
                                تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#settlement-details">نمایش جزییات یک
                                تسویه</a><br>
                            <a href="https://vandarpay.github.io/docs/settlement/#cancel">لغو یک تسویه</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn"> سرویس تسویه گروهی
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-index">لیست
                                تسویه های گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlements-show">جزییات
                                یک تسویه گروهی</a><br>
                            <a href="https://vandarpay.github.io/docs/batch-settlement/#batch-settlement-store">ثبت یک
                                تسویه گروهی</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت خودکار
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/subscription/#directdebit">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#get-token">سرویس دریافت توکن</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#withdrawal">سرویس برداشت وجه</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/#error">لیست خطاهای دریافتی</a><br>
                            <a href="https://vandarpay.github.io/docs/subscription/better-product-design/"
                               target="_blank">طراحی محصولی بهتر</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس پرداخت یکپارچه
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/mpg/#mpg">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/mpg/#objects">آبجکت های سرویس پرداخت یکپارچه</a><br>
                            <a href="https://vandarpay.github.io/docs/mpg/#payment-methods">مدیریت روش‌های پرداخت</a><br>
                            <a href="https://vandarpay.github.io/docs/mpg/#get-token">صدور مجوز در روش پرداخت از حساب</a><br>
                            <a href="https://vandarpay.github.io/docs/mpg/#checkout">سرویس صورت‌حساب (Checkout)</a><br>
                        </div>
                    </li>
<!--                    <li>-->
<!--                        <button class="dropdown-btn">سرویس پرداخت با وندار-->
<!--                            <br>-->
<!--                            <i class="fa fa-caret-down"></i>-->
<!--                        </button>-->
<!--                        <div class="dropdown-container">-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#overview">معرفی سرویس</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#intro">مقدمه</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#send">دریافت توکن</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#redirect">انتقال کاربر</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#inquiry">استعلام</a><br>-->
<!--                            <a href="https://vandarpay.github.io/docs/pay-by-vandar/#verify">تایید</a><br>-->
<!--                        </div>-->
<!--                    </li>-->
                    <li>
                        <button class="dropdown-btn">سرویس مشتریان
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/customers/#customers">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#base">مشتریان</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#wallet">کیف پول</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#transactions">تراکنش</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#sheba">شبا</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#card">کارت</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#card-to-iban">کارت به شبا</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#authentication">احراز هویت</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#logs">گزارشات</a><br>
                            <a href="https://vandarpay.github.io/docs/customers/#cash-in-code">شناسه پرداخت</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">سرویس معاملات امن
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/miando/#intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#customers">مشتریان</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#agreements">معاملات</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#tickets">تیکت ها</a><br>
                            <a href="https://vandarpay.github.io/docs/miando/#webhooks">وبهوک</a><br>
                        </div>
                    </li>
                    <li>
                        <button class="dropdown-btn">ابزار واریز بانکی
                            <br>
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="https://vandarpay.github.io/docs/cash-in/#intro">مقدمه</a><br>
                            <a href="https://vandarpay.github.io/docs/cash-in/#ibans-list">لیست شماره شباها</a><br>
                            <a href="https://vandarpay.github.io/docs/cash-in/#get-balance">دریافت موجودی حساب</a><br>
                            <a href="https://vandarpay.github.io/docs/cash-in/#deposit">درخواست واریز</a><br>
                        </div>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/refund">بازگشت وجه</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/banks">بانک‌ها</a>
                    </li>
                    <li>
                        <a href="https://vandarpay.github.io/docs/errors">خطا‌ها</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-sm-9">
            <article class="content">
                <div class="article" id="miando">

                    <div>
                        آخرین تغییرات: ۱۴۰۱/۰۸/۲۲
                    </div>

                    <h2 class="article-header">مقدمه</h2>
                    <div>
                        <h3 class="title" id="intro1">
                            <a href="#intro1"> <strong>سرویس معاملات امن چیست:</strong></a>
                        </h3>
                        <p>
                            میاندو برای خریدار هویت فروشنده و برای فروشنده، پرداخت مبلغ از سوی خریدار را تضمین می‌کند.
                            خریدار مبلغ معامله را نزد میاندو به امانت می‌گذارد تا پس از ارائه کالا یا خدمت و تایید
                            خریدار، این مبلغ برای فروشنده آزاد شود.
                        </p>
                        <h3 class="title" id="activation">
                            <a href="#activation"> <strong>نحوه فعالسازی:</strong></a>
                        </h3>
                        <p>
                            شما برای استفاده از سرویس پرداخت امن میاندو نیاز دارید که در ابتدا برای کسب و کار خود
                            درخواست فعالسازی ابزار پرداخت امن را ثبت کنید تا پشتیبانی بعد از تایید آن را برای شما فعال
                            کند.
                            در غیر این صورت شما نمیتوانید از سرویس پرداخت امن در کسب و کار خود استفاده کنید.
                        </p>
                        <p>
                            پس از فعالسازی به دو مقدار client_id و client_secret دسترسی پیدا خواهید کرد که با استفاده از
                            این مقادیر میتوانید جهت دریافت توکن کسب و کار خود اقدام کنید.
                        </p>

                        <h3 class="title" id="authorization">
                            <a href="#authorization"> <strong>احراز هویت درخواست ها: </strong></a>
                        </h3>
                        <p>
                            همانطور که گفته شد تمامی درخواست های ارسالی به OpenAPI ابزار پرداخت امن وندار نیازمند یک
                            توکن است که مربوط به کسب و کار شماست.
                        </p>
                        <p>
                            برای دریافت توکن شما میتوانید درخواست زیر را به سرویس SSO وندار ارسال کنید تا توکن مربوطه را
                            دریافت کنید.
                        </p>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/sso/oauth/token
</pre>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>grant_type</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>client_id</td>
                                <td>int</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>client_secret</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
    "grant_type" : "client_credentials",
    "client_id": 1,
    "client_secret": "orFFZ7314ufiYt1D1bqJ0aJxO2AL2e8IKAjQG1iW"
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 201
{
    "token_type": "Bearer",
    "expires_in": 31536000,
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI3NSIsImp0aSI6ImEyYmQzY2Y5MDAxZDMwMGUyY2VhNzAxMjBhZTYzMjVlYmE1MmU2OTlhNmY1MzJiY2Q4OTFjMTk3OThjNGFmZjYxMjZjYTZmY2QwMDhhNTRkIiwiaWF0IjoxNjY2NTQ2NTY0LjA4NTY4OSwibmJmIjoxNjY2NTQ2NTY0LjA4NTY5MiwiZXhwIjoxNjk4MDgyNTY0LjA3NjQ4LCJzdWIiOiIiLCJzY29wZXMiOlsicGFydG5lciJdfQ.PWInLbjoC2MkhXxgGsqA5LfQkSnQEVXEARw2nJGEiFlz3a-c7pi12UVe-1hNm0IOcSW6NZXd7oKOyFxqhBl5WgAWPaAbM3WEy4R3Va-fo7ikmr77Xu1RcPqJwqRS3Dkyf4Ug-8sd9FSabGafCt6jfG163b-5bdqwV9WQJIbbSNuXMuQmuil2qK5F4kBLgUQaWGC170cNBSQCWVcyuFRc7-qYLYQqz08y2a6rcC2xkR7F3UmjSqU35eWGyhqRsy5iijtEZ-mZlVs2OSEbyNSylkKPSE0Z2r4gwKVbw-Qbx1iZchhSfalLhlbJGvNIcOhXGqYQCJyru2PVeP4zaG34TRccGwTmAR-Yx1hat2VBclK3Tzc6f9wqzSkhaTDwkLKGVwNrrKALf84fbGz14yC_LY6PL-atdS1RbHHkDb_Gl0WuPNeW4aNbpxHIqflOJjh6pVPuejAYIi-fomiRt7SQwwSFxeEKlvHNjIBZqecIKmfAYYNTdHTq4k91kH8LxKo4U4lXMIsvhh9uDszX9yMXwAivRX4F8AzI4sERrx51cosZ0vzrJUdg_nlKMIOGW2hIM9pCxZSekEr7PDgq5dKqDbcjnUegnPLJcc-1UdnUlOtwa005VRrs-2NdkdEAWy7oTSDFjqd3D5ItZ7sLhCZLnjtOPJ_fbpk4Ov95zwrgidsao"
}
</pre>
                        <div class="info">
                            <strong>نکته!</strong> توکن دریافت شده یکسال اعتبار دارد که درصورت منقضی شدن آن میتوانید
                            مجددا نسبت به دریافت آن اقدام کنید (زمان انقضای توکن متغیر است و بسته به مقدار expires_in
                            ممکن است تغییر کند).
                        </div>

                        <p>
                            برای تمامی درخواست های ارسالی باید مقادیر زیر در هدر ارسال شوند.
                        </p>
                        <pre>
<span class="key">Accept:</span> application/json
<span class="key">Authorization:</span> Bearer {access_token}</pre>
                        <br>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی در صورت عدم احراز هویت:
                        </h3>
                        <pre><span class="key">HTTP/1.1</span> 401
{
  "error": "Unauthenticated"
}</pre>

                        <br>

                        <h2 class="article-header" id="customers">
                            <a href="#customers">مشتریان</a></h2>
                        <p>
                            مشریان در میاندو به اشخاصی اطلاق می‌شود که به عنوان طرفین معامله (خریدار، فروشنده) به خرید و
                            فروش می‌پردازند.
                        </p>

                        <h3 class="title" id="customers-store"><a href="#customers-store">
                            ۱. ایجاد مشتری:
                        </a>

                        </h3>
                        <p>در این بخش می‌توانید یک مشتری ایجاد کنید که بتواند در یک معامله شرکت کند.</p>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/miando/api/v1/customers
</pre>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>first_name</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>last_name</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>national_code</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>mobile</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>birth_date</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
    "first_name" : "رضا",
    "last_name": "رضایی",
    "national_code": "1271234567",
    "mobile": "09123456789",
    "birth_date": "13700502"
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 201
{
    "message": "اطلاعات شما با موفقیت ثبت شد و در دست بررسی است."
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
    "message": "مقادیر ورودی صحیح نیستند.",
    "code": "validation_error",
    "errors": {
        "first_name": "فیلد نام الزامی است",
        "last_name": "فیلد نام خانوادگی الزامی است",
        "national_code": "فیلد کدملی الزامی است",
        "mobile": "فیلد موبایل الزامی است",
        "birth_date": "فیلد تاریخ تولد الزامی است"
    }
}
</pre>

                        <h3 class="title" id="customers-show">
                            <a href="#customers-show"> ۲. نمایش مشتری</a>
                        </h3>
                        <p>
                            با استفاده از این سرویس می‌توانید اطلاعات یک مشتری را مشاهده نمایید.
                        </p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/customers/{customer_uid}
</pre>
                        <p>پارامتر {customer_uid} شناسه مشتری می‌باشد.</p>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "نمایش موفق اطلاعات مشتری",
    "data": {
        "uid": 152790245,
        "first_name" : "رضا",
        "last_name": "رضایی",
        "national_code": "1271234567",
        "mobile": "09123456789",
    }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 400
{
    "message": "اطلاعات کاربر در سیستم موجود نیست.",
    "code": "user_not_found"
}
</pre>

                        <h3 class="title" id="customers-index">
                            <a href="#customers-index"> ۳. لیست مشتریان</a>
                        </h3>
                        <p>
                            با استفاده از این سرویس می‌توانید لیست مشتری‌های ساخته شده را مشاهده نمایید.
                        </p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/customers
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "data": [
        {
            "uid": 152777442,
            "first_name" : "رضا",
            "last_name": "رضایی",
            "national_code": "1271234567",
            "mobile": "09123456789"
        },
        {
            "uid": 1633644556,
            "first_name": "محمد",
            "last_name": "محمدی",
            "national_code": "1167723051",
            "mobile": "09023456789"
        }
    ],
    "links": {
        "first": "http://escrow.vandar.local/api/v1/customers?page=1",
        "last": "http://escrow.vandar.local/api/v1/customers?page=1",
        "prev": null,
        "next": null
    },
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "links": [
            {
                "url": null,
                "label": "pagination.previous",
                "active": false
            },
            {
                "url": "http://escrow.vandar.local/api/v1/customers?page=1",
                "label": "1",
                "active": true
            },
            {
                "url": null,
                "label": "pagination.next",
                "active": false
            }
        ],
        "path": "http://escrow.vandar.local/api/v1/customers",
        "per_page": 15,
        "to": 2,
        "total": 2
    },
    "message": "نمایش موفق اطلاعات مشتریان"
}
</pre>

                        <br>

                        <h2 class="article-header" id="agreements">
                            <a href="#agreements">معاملات</a></h2>
                        <p>
                            پیش نویسی است که پس از تایید طرفین به یک قرارداد بین فروشنده و خریدار در میاندو ثبت می‌شود.
                        </p>

                        <h3 class="title" id="agreements-store"><a href="#agreements-store">
                            ۱. ایجاد معامله:
                        </a>

                        </h3>
                        <p>در این بخش می‌توانید یک پیش‌نویس معامله ایجاد کنید.</p>
                        <p>پیش‌نویس معامله به این معناست که فقط طرف سازنده معامله را تایید کرده است و دیگر اشخاص حاضر در
                            معامله هنوز معامله را تایید نکرده اند.</p>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/miando/api/v1/agreements
</pre>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>trace_id</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>currency_code</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>redirect_url</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>description</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>creator</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>settlement_type</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>parties</td>
                                <td>array</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>parties.*.role</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>parties.*.mobile</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>parties.*.iban</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items</td>
                                <td>array</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.title</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.category</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.description</td>
                                <td>string</td>
                                <td>optional</td>
                            </tr>
                            <tr>
                                <td>items.*.link</td>
                                <td>string</td>
                                <td>optional</td>
                            </tr>
                            <tr>
                                <td>items.*.item_price</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.price</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.payer</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.payment_method</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.quantity</td>
                                <td>integer</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>items.*.attachments</td>
                                <td>array</td>
                                <td>optional</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>trace_id (اجباری):
                                شناسه یکتا سمت کسب و کار.
                            </li>
                            <li>currency_code (اجباری):
                                واحد پول مورد استفاده در معامله (in:IRR).
                            </li>
                            <li>redirect_url (اجباری):
                                لینک بازگشت به کسب و کار پس از پرداخت موفق.
                            </li>
                            <li>description (اجباری):
                                توضیحات مربوط به توافق نامه.
                            </li>
                            <li>creator (اجباری):
                                نقش ایجاد کننده معامله (in:buyer,seller).
                            </li>
                            <li>settlement_type (اختیاری):
                                نوع تسویه حساب معامله در صورت نهایی شدن (in:wallet,wallet_iban).
                                <br>
                                <div class="info">
                                    wallet: شارژ کیف پول ونداری کاربر
                                    <br>
                                    wallet_iban: شارژ کیف پول و سپس انتقال به شبای کاربر
                                </div>
                            </li>
                            <li>
                                parties.*.role (اجباری):
                                نقش طرف معامله (in:buyer,seller).
                            </li>
                            <li>
                                parties.*.mobile (اجباری):
                                موبایل طرف معامله.
                                <div class="info">
                                    کاربر باید از قبل توسط شما به لیست مشتری ها اضافه شده باشد.
                                </div>
                            </li>
                            <li>
                                parties.*.iban (اجباری):
                                شماره شبا طرف معامله.
                            </li>
                            <li>
                                items.*.title (اجباری):
                                عنوان کالا.
                            </li>
                            <li>
                                items.*.category (اجباری):
                                دسته‌بندی کالا.
                                <br>
                                <div class="info">
                                    اسلاگ‌های مجاز جهت انتخاب دسته‌بندی:
                                    <br>
                                    general: عمومی
                                    <br>
                                    digital: دیجیتال
                                </div>
                            </li>
                            <li>
                                items.*.description (اختیاری):
                                توضیحات کالا.
                            </li>
                            <li>
                                items.*.link (اختیاری):
                                لینک توضیحات مربوط به کالا.
                            </li>
                            <li>
                                items.*.item_price (اجباری):
                                مبلغ کل کالا.
                            </li>
                            <li>
                                items.*.price (اجباری):
                                مبلغ بیعانه کالا.
                            </li>
                            <li>
                                items.*.payer (اجباری):
                                نقش پرداخت‌کننده هزینه مربوط به کالا (in:buyer,seller).
                            </li>
                            <li>
                                items.*.payment_method (اجباری):
                                نوع پرداخت: پرداخت کامل، پیش پرداخت (in:full-pay,pre-pay).
                            </li>
                            <li>
                                items.*.quantity (اجباری):
                                تعداد کالا.
                            </li>
                            <li>
                                items.*.attachments (اختیاری):
                                عکس‌های مربوط به کالا.
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
  "trace_id": "89fa2150-c976-44ed-87d1-2037abf51821",
  "currency_code": "IRR",
  "redirect_url": "http://redirect.url",
  "description": "موبایل y8s",
  "creator": "buyer",
  "parties": [
    {
      "role": "buyer",
      "mobile": "09123456789",
      "iban": "IR670120020000002353697200"
    },
    {
      "role": "seller",
      "mobile": "09023456789",
      "iban": "IR040120020000002343697300"
    }
  ],
  "items": [
    {
      "title": "موبایل y8s",
      "category": "digital",
      "description": "در حد نو",
      "link": "https://divar.ir/v/gYoSNB1z",
      "item_price": "200000",
      "price": "200000",
      "payer": "buyer",
      "payment_method": "full-pay",
      "quantity": 1,
      "attachments": [
        "https://vandar.io/assets/img/home/dashboard-full.png",
        "https://vandarpay.github.io/docs/images/token-step1.png"
      ]
    }
  ]
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 201
{
    "message": "معامله با موفقیت ایجاد شد",
    "data": {
        "tracking_code": "2075222800",
        "trace_id": "408ce627-d220-4658-9fca-0403ed46f1a7",
        "description": "موبایل y8s",
        "parties": [
            {
                "role": "buyer",
                "state": "accepted",
                "national_code": "1271234567",
                "mobile": "09123456789"
            },
            {
                "role": "seller",
                "state": "pending",
                "national_code": "1167723051",
                "mobile": "09023456789"
            }
        ],
        "state": "draft",
        "created_at": "2022-09-26T08:32:51.000000Z"
    }
}
</pre>

                        <br>

                        <h3 class="title" id="agreements-agreeing">
                            <a href="#agreements-agreeing"> ۲. تعیین وضعیت معامله</a>
                        </h3>
                        <p>
                            با استفاده از این سرویس می‌توانید یک معامله را تایید یا رد کنید.
                        </p>
                        <p>
                            پس از تایید معامله توسط خریدار/فروشنده، لینک پرداخت جهت پرداخت مبلغ معامله توسط خریدار برگشت
                            داده میشود که شما میتوانید از آن استفاده کنید.
                        </p>
                        <pre>
<span class="key">METHOD:</span> POST
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/agreements/{tracking_code}
</pre>
                        <p>پارامتر {tracking_code} کد رهگیری معامله می‌باشد.</p>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>action</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>applicant_mobile</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>action (اجباری):
                                نوع عملیات (in:agree,reject).
                            </li>
                            <li>applicant_mobile (اجباری):
                                موبایل کاربر درخواست‌دهنده.
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
  "action": "agree",
  "applicant_mobile": "09123456789"
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق به ازای تایید پیش‌نویس:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "درخواست ایجاد معامله تایید شد.",
    "data": {
        "web_view_link": "https://vandar.io/minado/payment/review/104148740"
    }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق به ازای رد پیش‌نویس:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
     "message": "درخواست ایجاد معامله رد شد."
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
    "code": 422,
    "message": "مقادیر ورودی صحیح نیستند",
    "errors": {
        "action": "فیلد نوع درخواست الزامی است",
        "applicant_mobile": "فیلد موبایل تایید کننده الزامی است"
    }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق به ازای وضعیت نامعتبر قرارداد:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 400
{
    "message": "وضعیت قرارداد نامعتبر است!",
    "code": "invalid_state_agreement"
}
</pre>

                        <br>

                        <h3 class="title" id="agreements-finalize">
                            <a href="#agreements-finalize"> ۳. نهایی سازی معامله</a>
                        </h3>
                        <p>
                            شما با استفاده از این سرویس میتوانید معامله را نهایی کنید.
                        </p>
                        <p>نهایی شدن معامله به این معناست که خریدار کالا را تحویل گرفته و مبلغ معامله باید به حساب
                            فروشنده واریز شود.</p>
                        <p>تنها قراردادهایی که پرداخت آن ها با موفقیت انجام شده است قابلیت نهایی شدن را دارند.</p>
                        <pre>
<span class="key">METHOD:</span> POST
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/agreements/{tracking_code}/finalize
</pre>
                        <p>پارامتر {tracking_code} کد رهگیری معامله می‌باشد.</p>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>buyer_mobile</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>buyer_mobile (اجباری):
                                موبایل کاربر درخواست‌دهنده.
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
  "buyer_mobile": "09123456789"
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق به ازای نهایی سازی معامله:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "معامله با موفقیت تکمیل شد.",
    "data": {
        "is_finalized": true,
    }
}
</pre>

                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
    "code": 422,
    "message": "مقادیر ورودی صحیح نیستند",
    "errors": {
        "buyer_mobile": "فیلد موبایل خریدار الزامی است"
    }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق به ازای وضعیت نامعتبر قرارداد:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 400
{
    "message": "وضعیت قرارداد نامعتبر است!",
    "code": "invalid_state_agreement"
}
</pre>

                        <br>

                        <h3 class="title" id="agreements-cancel">
                            <a href="#agreements-cancel"> ۴. لغو معامله</a>
                        </h3>
                        <p>
                            شما با استفاده از این سرویس میتوانید یک معامله را لغو کنید.
                        </p>
                        <p>خریدار فقط میتواند معامله ای را لغو کند که یا پیش نویس باشد یا طرفین معامله آن را تایید کرده
                            باشند، این در صورتی است که فروشنده بعد از پرداخت خریدار یا در حالت ثبت مشکل نیز میتواند یک
                            معامله را لغو کند.</p>
                        <p>در صورتی که خریدار مبلغی را پرداخت کرده باشد، بعد از لغو شدن معامله مبلغ معامله به حساب
                            خریدار برگشت داده میشود.</p>
                        <pre>
<span class="key">METHOD:</span> POST
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/agreements/{tracking_code}/cancel
</pre>
                        <p>پارامتر {tracking_code} کد رهگیری معامله می‌باشد.</p>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>applicant_mobile</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>buyer_mobile (اجباری):
                                موبایل کاربر درخواست‌دهنده.
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
  "applicant_mobile": "09123456789"
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق به ازای نهایی سازی معامله:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "معامله با موفقیت لغو شد.",
    "data": {
        "is_canceled": true,
    }
}
</pre>

                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
    "code": 422,
    "message": "مقادیر ورودی صحیح نیستند",
    "errors": {
        "applicant_mobile": "فیلد موبایل درخواست‌دهنده الزامی است"
    }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق به ازای وضعیت نامعتبر قرارداد:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 400
{
    "message": "وضعیت قرارداد نامعتبر است!",
    "code": "invalid_state_agreement"
}
</pre>

                        <br>

                        <h3 class="title" id="agreements-show">
                            <a href="#agreements-show"> ۵. نمایش معامله</a>
                        </h3>
                        <p>
                            با استفاده از این سرویس می‌توانید اطلاعات یک معامله را مشاهده نمایید.
                        </p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/agreements/{tracking_code}
</pre>
                        <p>پارامتر {tracking_code} کد رهگیری معامله می‌باشد.</p>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "نمایش موفق اطلاعات معامله",
    "data": {
        "tracking_code": "2051291079",
        "trace_id": "ee6b9100-a0a4-478d-8535-9eecff8af4b6",
        "description": "بنز s500",
        "parties": [
            {
                "role": "buyer",
                "state": "accepted"
                "national_code": "1271234567",
                "mobile": "09123456789"
            },
            {
                "role": "seller",
                "state": "accepted"
                "national_code": "1167723051",
                "mobile": "09023456789"
            }
        ],
        "items": [
            {
                "title": "بنز s500",
                "description": "در حد نو",
                "quantity": 1,
                "link": "https://example.ir/v/gYoSNB1z",
                "category": "digital"
            }
        ],
        "amount": 200000,
        "state": "investigation",
        "creator": "buyer",
        "created_at": "2022-08-20T01:51:21.000000Z"
    }
}
</pre>

                        <br>

                        <h3 class="title" id="agreements-index">
                            <a href="#agreements-index"> ۶. لیست معاملات</a>
                        </h3>
                        <p>
                            با استفاده از این سرویس می‌توانید لیست معاملات ساخته شده را مشاهده نمایید (اطلاعات در این
                            صفحه بصورت صفحه بندی شده نمایش داده میشوند).
                        </p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/agreements
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "data": [
        {
            "tracking_code": "896770185",
            "trace_id": "68112b4f-9a93-4f2b-93db-070331fe3b74",
            "description": "iphone 11",
            "parties": [
                {
                    "role": "buyer",
                    "state": "accepted"
                    "national_code": "1271234567",
                    "mobile": "09123456789"
                },
                {
                    "role": "seller",
                    "state": "accepted"
                    "national_code": "1167723051",
                    "mobile": "09023456789"
                }
            ],
            "items": [
                {
                    "title": "phone 11",
                    "description": "در حد نو",
                    "quantity": 1,
                    "link": "https://example.ir/v/gYoSNB1z",
                    "category": "digital"
                }
            ],
            "amount": 418000,
            "state": "draft",
            "created_at": "2022-09-24T07:54:18.000000Z"
        },
        {
            "tracking_code": "1678531126",
            "trace_id": "d86452f4-9dcc-461d-aa0d-0542e0dbefda",
            "description": "موبایل y8s",
            "parties": [
                {
                    "role": "buyer",
                    "state": "accepted"
                    "national_code": "1271234567",
                    "mobile": "09123456789"
                },
                {
                    "role": "seller",
                    "state": "accepted"
                    "national_code": "1167723051",
                    "mobile": "09023456789"
                }
            ],
            "items": [
                {
                    "title": "موبایل y8s",
                    "description": "در حد نو",
                    "quantity": 1,
                    "link": "https://example.ir/v/gYoSNB1z",
                    "category": "digital"
                }
            ],
            "amount": 418000,
            "state": "contract",
            "created_at": "2022-09-24T11:18:13.000000Z"
        }
    ],
    "links": {
        "first": "http://escrow.vandar.local/api/v1/agreements?page=1",
        "last": "http://escrow.vandar.local/api/v1/agreements?page=1",
        "prev": null,
        "next": null
    },
    "meta": {
        "current_page": 1,
        "from": 1,
        "last_page": 1,
        "links": [
            {
                "url": null,
                "label": "pagination.previous",
                "active": false
            },
            {
                "url": "http://escrow.vandar.local/api/v1/agreements?page=1",
                "label": "1",
                "active": true
            },
            {
                "url": null,
                "label": "pagination.next",
                "active": false
            }
        ],
        "path": "http://escrow.vandar.local/api/v1/agreements",
        "per_page": 15,
        "to": 2,
        "total": 2
    },
    "message": "نمایش موفق اطلاعات معاملات"
}
</pre>

                        <br>

                        <h2 class="article-header" id="tickets">
                            <a href="#tickets">تیکت‌ها</a></h2>
                        <p>
                            اگر در روند معامله مشکلی پیش آمد می‌توانید با ثبت تیکت مشکل خود را بیان کنید.
                        </p>

                        <h3 class="title" id="tickets-store"><a href="#tickets-store">
                            ۱. ایجاد تیکت:
                        </a>

                        </h3>
                        <p>در این بخش می‌توانید تیکت ایجاد کنید.</p>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/miando/api/v1/tickets
</pre>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>agreement_tracking_code</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>reporter</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>ticket_type_slug</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>redirect_url</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>callback</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>description</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>attachments</td>
                                <td>array</td>
                                <td>optional</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>agreement_tracking_code (اجباری):
                                کد رهگیری معامله.
                            </li>
                            <li>reporter_mobile (اجباری):
                                موبایل شخص.
                            </li>
                            <li>ticket_type_slug (اجباری):
                                نوع تیکت.
                                <br>
                                <div class="info">
                                    اسلاگ‌های مجاز جهت انتخاب نوع تیکت:
                                    <br>
                                    <ul>
                                        <li>
                                            dont_access_to_seller: به فروشنده دسترسی ندارم
                                            <br>
                                            نقش ثبت کننده تیکت: buyer
                                        </li>
                                        <li>
                                            dispute_with_seller: با فروشنده اختلاف دارم
                                            <br>
                                            نقش ثبت کننده تیکت: buyer
                                        </li>
                                        <li>
                                            stop_buying: از خرید منصرف شدم
                                            <br>
                                            نقش ثبت کننده تیکت: buyer
                                        </li>
                                        <li>
                                            dont_access_to_buyer: به خریدار دسترسی ندارم
                                            <br>
                                            نقش ثبت کننده تیکت: seller
                                        </li>
                                        <li>
                                            dispute_with_buyer: با خریدار اختلاف دارم
                                            <br>
                                            نقش ثبت کننده تیکت: seller
                                        </li>
                                        <li>
                                            stop_selling: از فروش منصرف شدم
                                            <br>
                                            نقش ثبت کننده تیکت: seller
                                        </li>
                                        <li>
                                            commodity_delivered_buyer_not_end_transaction: کالا را تحویل داده‌ام ولی
                                            خریدار پایان معامله را اعلام نمی‌کند
                                            <br>
                                            نقش ثبت کننده تیکت: seller
                                        </li>
                                        <li>
                                            other_cases: سایر موارد
                                            <br>
                                            نقش ثبت کننده تیکت: seller,buyer
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li>redirect_url (اجباری):
                                لینک بازگشت به کسب و کار پس از ثبت مشکل.
                            </li>
                            <li>
                                description (اجباری):
                                توضیحات.
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
  "agreement_tracking_code": "1005544572",
  "ticket_type_slug": "dont_access_to_seller",
  "description": "توضیحات مربوط به شکایت",
  "reporter_mobile": "09123456789",
  "redirect_url": "http://redirect.url"
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 201
{
    "message": "تیکت با موفقیت ایجاد شد",
    "data": {
        "ticket_uid": 888143355,
        "button": {
            "type": "redirect_url",
            "link": "http://redirect.url",
            "text": "بازگشت"
        }
    }
}
</pre>

                        <br>

                        <h2 class="article-header" id="webhooks">
                            <a href="#webhooks">وبهوک</a></h2>
                        <p>
                            شما با استفاده از سرویس وبهوک میاندو میتوانید در لحظه از اتفاقاتی که برای کاربرانتان در طول
                            پروسه‌ی پرداخت امن رخ میدهد مطلع شوید و از تغییرات اتفاق افتاده در سیستم آگاه باشید.
                        </p>

                        <h3 class="title" id="webhooks-store"><a href="#webhooks-store">
                            ۱. ایجاد وبهوک:
                        </a>

                        </h3>
                        <p>در این قسمت شما میتوانید با معرفی آدرس وبهوک و لیست رویدادهای مورد نیازتان، وبهوکتان را ابجاد
                            کنبد.</p>
                        <div class="info">
                            <strong>نکته!</strong> توجه داشته باشید که رویدادهای مجزایی را می‌توان برای هر ادرس تنظیم
                            کرد و فقط یک رویداد یرای هر ادرس قابل تعریف می‌باشد.
                        </div>
                        <pre>
<span class="key">Method:</span> POST
<span class="key">Address:</span> https://api.vandar.io/miando/api/v1/webhooks</pre>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>url</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>events</td>
                                <td>array</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>events.*</td>
                                <td>String</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>url (اجباری):
                                لینک به جهت ارسال وبهوک.
                                <div class="info">
                                    به جهت تامین امنیت وبهوک های ارسالی، لینک شما باید از نوع https باشد.
                                </div>
                            </li>
                            <li>events.* (اجباری):
                                لیست وبهوک های مورد نیاز.
                                <br>
                                <div class="info">
                                    جهت مشاهده اسلاگ‌های مجاز به <a href="#events-list" style="color: red">لیست رویدادها</a> مراجعه کنید
                                </div>
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
    "url" : "https://vandar.io/miando/webhook",
    "events" : [
        "agreement_created",
        "agreement_finalized",
        "seller_agreed_agreement"
    ]
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 201
{
    "message": "اطلاعات وبهوک با موفقیت ثبت شد.",
    "data": {
        "id": 1,
        "url": "https://vandar.io/miando/webhook",
        "is_active": true,
        "events": [
            {
                "slug": "agreement_created",
                "title": "معامله جدید ساخته شد"
            },
            {
                "slug": "agreement_finalized",
                "title": "معامله با موفقیت به پایان رسید"
            },
            {
                "slug": "seller_agreed_agreement",
                "title": "فروشنده معامله را پذیرفت"
            }
        ]
    }
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
    "message": "مقادیر ورودی صحیح نیستند.",
    "code": "validation_error",
    "errors": {
        "url": "فیلد لینک الزامی است",
        "events": "فیلد رویداد ها الزامی است"
    }
}
</pre>

                        <h3 class="title" id="webhooks-update"><a href="#webhooks-update">
                            ۲. بروزرسانی وبهوک:
                        </a>

                        </h3>
                        <p>شما با استفاده از این درخواست می‌توانید وضعیت را فعال و غیرفعال کنید، آدرس وبهوک و لیست
                            رویدادهای مورد نیاز را نیز ویرایش کنید.</p>
                        <pre>
<span class="key">Method:</span> PUT
<span class="key">Address:</span> https://api.vandar.io/miando/api/v1/webhooks/{webhook_id}</pre>
                        <p>پارامتر {webhook_id} شناسه وبهوک می‌باشد.</p>
                        <h3 class="sub-title">
                            پارامترهای مجاز
                        </h3>
                        <table class="table">
                            <thead>
                            <tr>
                                <th>name</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>url</td>
                                <td>string</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>is_active</td>
                                <td>bool</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>events</td>
                                <td>array</td>
                                <td>required</td>
                            </tr>
                            <tr>
                                <td>events.*</td>
                                <td>String</td>
                                <td>required</td>
                            </tr>
                            </tbody>
                        </table>
                        <h3 class="sub-title">
                            توضیحات
                        </h3>
                        <ul>
                            <li>url (اجباری):
                                لینک به جهت ارسال وبهوک.
                            </li>
                            <li>is_active (اجباری):
                                وضعیت سیستم وبهوک.
                            </li>

                            <li>events.* (اجباری):
                                لیست وبهوک های مورد نیاز.
                                <br>
                                <div class="info">
                                    جهت مشاهده اسلاگ‌های مجاز به <a href="#events-list" style="color: red">لیست رویدادها</a> مراجعه کنید
                                </div>
                            </li>
                        </ul>
                        <h3 class="sub-title">
                            نمونه درخواست با فرمت صحیح:
                        </h3>
                        <pre>
{
    "url": "https://shyepoortest.ir/webhook",
    "events": [
        "seller_agreed_agreement",
        "agreement_finalized"
    ],
    "is_active": true
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "url": "https://shyepoortest.ir/webhook",
    "events": [
        "seller_agreed_agreement",
        "agreement_finalized"
    ],
    "is_active": true
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 422
{
    "message": "مقادیر ورودی صحیح نیستند.",
    "code": "validation_error",
    "errors": {
        "url": "فیلد لینک الزامی است",
        "is_active": "فیلد وضعیت فعالسازی الزامی است",
        "events": "فیلد رویداد ها الزامی است"
    }
}
</pre>

                        <br>

                        <h3 class="title" id="webhook-show">
                            <a href="#webhook-show"> ۳. نمایش وبهوک</a>
                        </h3>
                        <p>
                            با استفاده از این درخواست می‌توانید اطلاعات یک وبهوک را مشاهده نمایید.
                        </p>
                        <pre>
<span class="key">METHOD:</span> GET
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/webhooks/{webhook_id}
</pre>
                        <p>پارامتر {webhook_id} شناسه وبهوک می‌باشد.</p>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "نمایش اطلاعات وبهوک با موفقیت انجام شد.",
    "data": {
        "id": 1,
        "url": "https://shyepoortest.ir/webhook",
        "is_active": true,
        "events": [
            {
                "slug": "seller_agreed_agreement",
                "title": "فروشنده معامله را پذیرفت"
            },
            {
                "slug": "agreement_finalized",
                "title": "معامله با موفقیت به پایان رسید"
            }
        ]
    }
}
</pre>

                        <br>

                        <h3 class="title" id="webhooks-index"><a href="#webhooks-index">
                            ۴. لیست وبهوک‌ها:
                        </a>

                        </h3>
                        <p>شما با استفاده از این درخواست می‌توانید لیست وبهوک‌های خود را دریافت کنید.</p>
                        <pre>
<span class="key">Method:</span> GET
<span class="key">Address:</span> https://api.vandar.io/miando/api/v1/webhooks</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "نمایش اطلاعات وبهوک با موفقیت انجام شد.",
    "data": [
        {
            "id": 1,
            "url": "https://shyepoortest.ir/webhook",
            "is_active": true,
            "events": [
                {
                    "slug": "seller_agreed_agreement",
                    "title": "فروشنده معامله را پذیرفت"
                },
                {
                    "slug": "agreement_finalized",
                    "title": "معامله با موفقیت به پایان رسید"
                }
            ]
        }
    ]
}
</pre>

                        <br>

                        <h3 class="title" id="webhook-delete">
                            <a href="#webhook-delete"> ۳. حذف وبهوک</a>
                        </h3>
                        <p>
                            با استفاده از این درخواست می‌توانید اطلاعات یک وبهوک را حذف نمایید.
                        </p>
                        <pre>
<span class="key">METHOD:</span> DELETE
<span class="key">URL:</span> https://api.vandar.io/miando/api/v1/webhooks/{webhook_id}
</pre>
                        <p>پارامتر {webhook_id} شناسه وبهوک می‌باشد.</p>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی موفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 200
{
    "message": "وبهوک با موفقیت حذف شد."
}
</pre>
                        <h3 class="sub-title">
                            نمونه پاسخ دریافتی ناموفق:
                        </h3>
                        <pre>
<span class="key">HTTP/1.1</span> 404
{
    "message": "موردی یافت نشد",
    "code": "not_found_error"
}
</pre>

                        <br>

                        <h3 class="title" id="webhooks-send">
                            <a href="#webhooks-send"> <strong>دریافت وبهوک:</strong></a>
                        </h3>

                        <p>تمامی وبهوک‌های ارسالی به سمت لینک تنظیم شده شما در قالب زیر به صورت یک درخواست POST ارسال
                            خواهند شد.</p>
                        <pre>
{
    "created": 1666468058,
    "type": "agreement_finalized",
    "data": {
        "tracking_code": 796638828
    }
}
</pre>
                        <p>در تمامی وبهوک های مربوط به قرار داد شما tracking_code مربوط به قرار داد را دریافت خواهید
                            کرد.</p>
                        <div class="info">
                            در این قسمت درصورت موفقیت آمیز بودن وبهوک شما باید HTTP Status Code 200 را خروجی دهید، در
                            غیر این صورت وبهوک مربوطه ناموفق تلقی میشود و مجددا سعی در ارسال آن میشود.
                        </div>

                        <br>

                        <h3 class="title" id="webhooks-signature">
                            <a href="#webhooks-signature"> <strong>احراز هویت وبهوک های دریافتی:</strong></a>
                        </h3>
                        <p>بدلیل مسائل امنیتی تمامی وبهوک های ارسالی بهتر است از سمت دریافت کننده نیز احراز هویت شوند،
                            به همین دلیل تمامی وبهوک های ارسالی از سمت میاندو دارای هدر X-Signature هستند که از یک الگوی
                            مشخص برای رمز نگاری استفاده میکند که شما نیز باید در سمت خود این رمزنگاری را بررسی کنید و
                            درصورت صحیح بودن این الگو از وبهوک استفاده کنید.</p>

                        <p>نمونه هدر ارسالی:</p>
                        <pre>
"X-Signature": "nbSOn\/WUA6lvhrkxv+QsTi9iCxhLskr8i4yz2rikj9I="
</pre>

                        <p>شما نیاز است که در هر وبهوک ارسالی این مقدار را بررسی کنید، نمونه کد بررسی این مقدار: </p>

                        <pre>
$hmac_header = $_SERVER['X-Signature'];

$data = file_get_contents('php://input');

$calculated_hmac = base64_encode(hash_hmac('sha256', $data, BUSINESS_SLUG, true));

if(hash_equals($hmac_header, $calculated_hmac)) {
    // Valid header
} else {
    // It's invalid
}</pre>
                        <p>در این قسمت شما نیاز است که با استفاده از داده دریافتی از سمت میاندو با الگوریتم داده شده
                            مقدار هش شده را بسازید و سپس با مقدار دریافتی از هدر بررسی کنید ، درصورت برابر بودن این
                            دومقدار میتوان نتیجه گرفت که هدر ارسالی هدر درست و معتبری است.</p>

                        <p>در مرحله اول نیاز است که شما داده ارسالی از سمت میاندو را که در فرمت Json است را با استفاده
                            از الگوریتم هش SHA256 تولید کنید، در این قسمت از اسلاگ بیزنس شما (BUSINESS_SLUG) به جهت
                            اعتبارسنجی مطمئن تر استفاده شده که همان نام انگلیسی بیزنس شما در وندار است.</p>

                        <h3 class="title" id="events-list">
                            <a href="#events-list"> <strong>لیست رویدادها و دیتای ارسالی:</strong></a>
                        </h3>

                        <ul style="font-size: large">
                            <li>
                                <b>agreement: کل وبهوک های مربوط به قرارداد </b>
                            </li>
                            <li>
                                agreement_created: معامله ایجاد شد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "creator_role": "buyer",
    "created_at": "2022-11-05 18:08:43",
    "creator_mobile": "09123456789"
}
</pre>
                            </li>
                            <li>
                                seller_agreed_agreement: فروشنده معامله را پذیرفت
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "applicant_mobile": "09123456789"
}
</pre>
                            </li>
                            <li>
                                seller_rejected_agreement: فروشنده معامله را رد کرد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
}
</pre>
                            </li>
                            <li>
                                buyer_agreed_agreement: خریدار معامله را پذیرفت
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "applicant_mobile": "09123456789"
}
</pre>
                            </li>
                            <li>
                                buyer_rejected_agreement: خریدار معامله را رد کرد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
}
</pre>
                            </li>
                            <li>
                                agreement_change_state_from_investigation: تغییر وضعیت معامله از معامله دارای مشکل
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "trace_id": "ee6b9100-a0a4-478d-8535-9eecff8af4b6",
    "state": "finalize",
}
</pre>
                            </li>
                            <li>
                                agreement_finalized: معامله نهایی شد.
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
}
</pre>
                            </li>
                            <li>
                                agreement_cancelled: معامله لغو شد.
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
}
</pre>
                            </li>
                            <li>
                                <b>payment: کل وبهوک های مربوط به پرداخت </b>
                            </li>
                            <li>
                                buyer_paid_agreement: خریدار مبلغ را به حساب امانی میاندو واریز کرد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "trace_id": "ee6b9100-a0a4-478d-8535-9eecff8af4b6",
    "transaction_ref_id": "548784521254",
    "payer_mobile": "09123456789",
    "amount": "4000000",
}
</pre>
                            </li>
                            <li>
                                payment_refunded_to_buyer: میاندو مبلغ پرداخت شده توسط خریدار را به حساب او بازگرداند.
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "amount": "4000000",
}
</pre>
                            </li>
                            <li>
                                seller_checked_out: مبلغ معامله به حساب فروشنده واریز شد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "amount": "4000000",
}
</pre>
                            </li>
                            <li>
                                <b>ticket: کل وبهوک های مربوط به تیکت </b>
                            </li>
                            <li>
                                buyer_submitted_ticket: خریدار مشکل ثبت کرد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "trace_id": "ee6b9100-a0a4-478d-8535-9eecff8af4b6",
    "reporter_mobile": "09123456789",
}
</pre>
                            </li>
                            <li>
                                seller_submitted_ticket: فروشنده مشکل ثبت کرد
                                <br>
                                <h4 class="sub-title">
                                    نمونه دیتای ارسالی:
                                </h4>
                                <pre>
{
    "tracking_code": "87441125",
    "trace_id": "ee6b9100-a0a4-478d-8535-9eecff8af4b6",
    "reporter_mobile": "09123456789",
}
</pre>
                            </li>
                        </ul>
                    </div>
                </div>
            </article>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        <div class="row" style="text-align: center">
            <div class="col-sm-8 col-xs-6 no-padding-bottom">
                <a href="https://github.com/vandarpay/docs" target="_blank">مخزن گیت‌هاب</a>
            </div>
            <div class="col-sm-4 col-xs-6 text-right no-padding-bottom">2020 &copy; <a href="https://vandar.io"
                                                                                       target="_blank">وندار</a></div>
        </div>
    </div>

</footer>
<button onclick="goTop()" id="go_top" title="Go to top">^</button>
<script>
    /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }


    var header = document.getElementById("myHeader");
    var sticky = header.offsetTop;

    window.onscroll = function () {
        var top = document.getElementById("go_top");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            top.style.display = "block";
        } else {
            top.style.display = "none";
        }
        if (window.pageYOffset > 320) {
            header.classList.add("fix-sidebar");
        } else {
            header.classList.remove("fix-sidebar");
        }

    };

    function goTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

</script>
</body>
</html>
